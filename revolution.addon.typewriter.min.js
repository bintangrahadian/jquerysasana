/************************************************
 * REVOLUTION 2.0.1 ADDON - TypeWriter
 * @version: 2.0.1 (05.09.2019)
 * @requires Slider Revolution 6.1.2
 * @author ThemePunch
************************************************/

!function(){var L,H,l,o=[],d=["onbeforeswap","layeraction","beforeredraw","afterdraw"];function s(e,t,i){o[o.length]=this,L||((L=e).event.special.typewriterDestroyed={remove:function(e){e.handler()}},l=document.createElement("textarea")),H="",this.layrs=[];var s=!(!L.fn.revolution||!L.fn.revolution[t[0].id])&&L.fn.revolution[t[0].id];if(s=s&&s.hasOwnProperty("responsiveLevels")?s.responsiveLevels:"",this.levels=s.toString().split(","),this.slider=t.on("typewriterDestroyed",p),i.each(this.writeLayerData.bind(this)),H){var r=document.head||document.body;if(r){var n=document.createElement("style");n.type="text/css",n.innerHTML=H,r.appendChild(n)}}for(var a=d.length,h=0;h<a;h++)t.on("revolution.slide."+d[h],this.eventCallback.bind(this))}function r(e,t,i,s){var r,n,a,h,l,o,d,p,u,c,y,f,w,g=JSON.parse(e.getAttribute("data-typewriter")),v=t.replace(/(_|\|)$/,""),b=e.className,m=g.lines,T=t,k=[];for(var D in!m&&g.sequenced&&g.looped&&(m=t),function(e){for(var t in e)e.hasOwnProperty(t)&&"string"==typeof e[t]&&-1!==e[t].search("ms")&&(e[t]=e[t].replace("ms",""))}(g),L(e).addClass("hide-typewriter-cursor"),g)g.hasOwnProperty(D)&&(c=g[D],this[D=D.replace(/_([a-z])/g,M)]="on"===c||!0===c?1:"off"===c||!1===c?0:!1===isNaN(c)?parseInt(c,10):c);if(this.blinking&&(H+="#"+e.id+":after {"+'content: "[char]"; animation: tp-typewriter [speed]s steps(2, start) infinite'.replace("[char]","one"===this.cursorType?"_":"|").replace("[speed]",.001*parseInt(this.blinkingSpeed,10))+"}#"+e.id+'.hide-typewriter-cursor:after {content: ""}',this.background))if(n=(n=(n=(e.getAttribute("data-dim")||"w:auto;h:auto;").split("w:")[1]).split(";")[0]).replace(/[\[\]']+/g,"").split(","),i)for(u=n.length,w=0;w<u;w++)(h=i[w])!==a&&(d="auto"===(d=n[w])||"none"===d,0<w?(d=d?"static":"absolute",H+="@media screen and (max-width: "+h+"px) {rs-layer#"+e.id+"[data-typewriter]:after {position: "+d+"}#"+e.id+".rs-layer[data-typewriter]:after {position: "+d+"}}"):d&&e.setAttribute("data-typewriter-blinking","true"),a=h);else"none"!==(d=n[0])&&"auto"!==d||e.setAttribute("data-typewriter-blinking","true");if(this.sequenced&&m){for(t=[S(unescape(t))],u=(m=m.split(",")).length,w=0;w<u;w++)(p=L.trim(m[w]))&&(t[t.length]=S(unescape(p)));e.setAttribute("data-typewriter-sequenced","true")}else{for(this.looped=!1,this.sequenced=!1,this.newlineDelay=this.linebreakDelay,u=(m=S(t,!0).split(/\r?\n|\r/g)).length,t=[],w=0;w<u;w++)t[t.length]=L.trim(m[w]),t[t.length]="";for(;""===t[0];)t.shift();for(;""===t[t.length-1];)t.pop()}if(this.wordDelay)if(r=g.delays){for(u=(r=r.split(",")).length,w=o=0;w<u;w++)y=(l=unescape(r[w]).split("|"))[0],f=l[1],!1===isNaN(y)&&!1===isNaN(f)&&(k[(y=parseInt(y))+o-1]=parseInt(f),o+=y);this.spaces=k}else this.wordDelay=!1;this.el=e,this.txt=t,this.orig=T,this.clean=v,this.revapi=s,this.len=t.length,this.statc=-1!==b.search("rs-layer-static"),L.data(e,"typewriter",this)}function M(e){return e[1].toUpperCase()}function S(e,t){return e=e.replace(/<(?!br\s*\/?)[^>]+>/g,"").replace(/(_|\|)$/,""),e=t?e.replace(/\r?\n|\r/g," ").replace(/<br[^>]*>/gi,"\n"):e.replace(/\r?\n|\r/g,"±").replace(/<br[^>]*>/gi,"µ").replace(/±µ|µ±/g,"µ").replace(/^±+|±+$/g,"").replace(/^µ+|µ+$/g,""),l.innerHTML=e,l.value}function p(){for(var e,t=o.length;t--;)if((e=o[t])[0]===this){i(e),o=o.splice(t,1);break}}function i(e){for(var t=e.layrs,i=t.length;i--;)L.removeData(t[i].el,"typewriter");for(var s in e)e.hasOwnProperty(s)&&delete e[s]}window.RsTypewriterAddOn=function(e,t){if(t){var i=t.find("rs-layer[data-typewriter], .rs-layer[data-typewriter]");i.length&&new s(e,t,i)}},s.prototype={eventCallback:function(e,t){this[e.namespace.replace(".slide","")](t)},onbeforeswap:function(e){var t,i=this.layrs,s=i.length;if(e=e.currentslide[0])for(;s--;)(t=i[s]).statc||(clearTimeout(t.timer),t.running=!1,t.active=!1,e.contains(t.el)||(t.el.innerHTML=t.orig,L(t.el).addClass("hide-typewriter-cursor")))},layeraction:function(e){if("enterstage"===e.eventtype){var t=L.data(e.layer[0],"typewriter"),i="html"===e.layertype||"text"===e.layertype;t&&i&&(L.fn.revolution.sA(e.layer[0],"vary-layer-dims",!0),t.active=!0,t.start())}},beforeredraw:function(e){for(var t=this.layrs,i=t.length;i--;)t[i].onRedraw()},afterdraw:function(){for(var e=this.layrs,t=e.length;t--;)e[t].onRedraw(!0)},writeLayerData:function(e,t){var i=L.trim(t.innerHTML);i?(t.getAttribute("data-whiteboard")&&("undefined"!=typeof console&&console.log("Whiteboard is disabled for Layers with Typewriter Add-On effect enabled"),t.removeAttribute("data-whiteboard")),this.layrs[this.layrs.length]=new r(t,i,this.levels,this.slider)):t.removeAttribute("data-typewriter")}},r.prototype={start:function(e,t){clearTimeout(this.timer),this.paused||(this.line=0,this.step=0,this.words=0,this.skip=!1,this.rewind=!1,this.rstart=!1,this.breaker=!1,this.paused=!1,this.rpaused=!1,this.str=this.txt[this.line],this.len=this.str.length,t?(this.timer=setTimeout(this.onStart.bind(this),e),this.revapi.trigger("revolution.slide.typewriterlooped",[this.el])):(this.el.innerHTML="&nbsp;",L(this.el).removeClass("hide-typewriter-cursor"),this.timer=setTimeout(this.onStart.bind(this),this.startDelay)),this.running=!0,this.revapi.trigger("revolution.slide.typewriterstarted",[this.el]),this.revapi.trigger("revolution.slide.typewriternewline",[this.el,this.line+1,this.txt[this.line]]))},onStart:function(){this.el.innerHTML="",this.animate()},animate:function(){var e,t,i,s,r=this.str,n=this.txt,a=this.step,h=this.rewind,l=h?this.deletionSpeed:this.speed;if(a<this.len)h?(r=r.slice(0,-1),this.str=r,this.el.innerHTML=r.replace(/µ/g,"<br>")||"&nbsp"):(this.breaker?(t="<br>",l=this.skip?this.linebreakDelay:this.newlineDelay,this.breaker=!1,this.skip=!1,this.words=0,this.step--):"µ"===(t=r[a])&&(this.skip=!0,this.breaker=!0,l=this.linebreakDelay),this.breaker||("&nbsp;"===(s=this.el.innerHTML)&&(s=""),this.el.innerHTML=s+t,this.wordDelay&&" "===t&&(i=this.words,(s=this.spaces[i])?(l=s,this.words=i<this.spaces.length-1?i+1:0):this.words+=1))),this.step++,e=!0;else{if(this.rstart)return void(this.paused?(this.rpaused=!0,this.lastSpeed=this.newlineDelay):this.start(this.newlineDelay,!0));this.line<n.length&&(this.line++,this.step=0,this.skip=!1,r=n[this.line],""===(this.str=r)&&(this.line++,this.breaker=!0,l=this.newlineDelay),this.line<n.length?(this.sequenced?(l=(h=!h)?(this.line--,this.str=n[this.line],this.deletionDelay):(this.str=n[this.line],this.len=this.str.length,this.newlineDelay),this.rewind=h):(this.str=n[this.line],this.len=this.str.length),e=!0,this.words=0,this.rewind||this.revapi.trigger("revolution.slide.typewriternewline",[this.el,this.line+1,n[this.line]])):this.looped&&(this.rewind=!0,this.rstart=!0,this.words=0,this.line--,this.str=n[this.line],e=!0,l=this.deletionDelay))}if(e){if(this.paused)return void(this.lastSpeed=l);l?this.timer=setTimeout(this.animate.bind(this),l):this.animate()}else this.running=!1,this.hideCursor&&L(this.el).addClass("hide-typewriter-cursor"),this.revapi.trigger("revolution.slide.typewriterended",[this.el])},onRedraw:function(e){if(e)this.el.innerHTML=this.state;else{var t=window.getComputedStyle(this.el,":after").getPropertyValue("position");this.state=this.el.innerHTML,this.el.innerHTML="absolute"===t?this.orig:this.clean}},pause:function(){this.active&&(clearTimeout(this.timer),this.paused=!0)},resume:function(){this.active&&(this.running?this.paused&&(this.rpaused?this.start(this.lastSpeed,!0):(this.paused=!1,this.lastSpeed?this.timer=setTimeout(this.animate.bind(this),this.lastSpeed):this.animate())):this.restart())},restart:function(){this.active&&(clearTimeout(this.timer),this.rpaused=!1,this.paused=!1,this.start())},restore:function(e){this.active&&(clearTimeout(this.timer),this.el.innerHTML=this.clean,e&&L(this.el).addClass("hide-typewriter-cursor"))}}}();